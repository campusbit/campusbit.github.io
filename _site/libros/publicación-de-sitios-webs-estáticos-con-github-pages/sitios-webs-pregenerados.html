<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Sitios webs pregenerados | Campus:bit</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Sitios webs pregenerados" />
<meta name="author" content="Kramer Edulab" />
<meta property="og:locale" content="es_ES" />
<meta name="description" content="Cómo publicar un sitio web estático pregenerado en GitHub Pages." />
<meta property="og:description" content="Cómo publicar un sitio web estático pregenerado en GitHub Pages." />
<meta property="og:site_name" content="Campus:bit" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-02-14T10:34:14-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Sitios webs pregenerados" />
<meta name="twitter:site" content="@krameredulab" />
<meta name="twitter:creator" content="@krameredulab" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kramer Edulab"},"dateModified":"2023-02-14T10:34:14-06:00","datePublished":"2023-02-14T10:34:14-06:00","description":"Cómo publicar un sitio web estático pregenerado en GitHub Pages.","headline":"Sitios webs pregenerados","mainEntityOfPage":{"@type":"WebPage","@id":"/libros/publicaci%C3%B3n-de-sitios-webs-est%C3%A1ticos-con-github-pages/sitios-webs-pregenerados"},"url":"/libros/publicaci%C3%B3n-de-sitios-webs-est%C3%A1ticos-con-github-pages/sitios-webs-pregenerados"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Campus:bit" /><script async src="https://www.googletagmanager.com/gtag/js?id=G-5MGR2F0337"></script>
<script>
  window['ga-disable-G-5MGR2F0337'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5MGR2F0337');
</script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" /></head>
<body><header class="site-header">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/">Campus:bit</a>

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
          </svg>
        </span>
      </label>

      <div class="trigger">
        
          
          
          
          
          
          <a class="page-link" href='/libros/publicación-de-sitios-webs-estáticos-con-github-pages'>Publicación de sitios webs estáticos con GitHub Pages</a>
        
      </div>
    </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">
  <header class="post-header">
    <h1 class="post-title">Sitios webs pregenerados</h1>
  </header>

  <div class="post-reading-time">
    <span class="material-symbols-outlined">schedule</span>
    <span>5 minutos</span>
  </div>

  <div class="post-content">
    <p>Ya hemos visto cómo generar un sitio web estático usando <strong>Jekyll</strong> y <strong>Liquid</strong> y cómo publicarlo automáticamente en <strong>GitHub Pages</strong>.
Pero en ocasiones, puede ser necesario generarlo nosotros mismos, por ejemplo, mediante un flujo de trabajo de <strong>GitHub Actions</strong> personalizado.
Para ciertos proyectos, es la única opción.</p>

<p>Al finalizar, sabrá:</p>

<ul>
  <li>
    <p>Qué es un sitio web pregenerado.</p>
  </li>
  <li>
    <p>Cómo configurar <strong>GitHub Pages</strong> para que <em>no</em> genere el sitio web automáticamente.</p>
  </li>
  <li>
    <p>Qué acciones utilizar para publicar un sitio web pregenerado en <strong>GitHub Pages</strong>.</p>
  </li>
  <li>
    <p>Qué acción utilizar para generar un sitio web con <strong>Jekyll</strong>.</p>
  </li>
</ul>

<h2 id="introducción">Introducción</h2>

<p>A los sitios que se publican explícitamente mediante un flujo de trabajo específico, los conoceremos como <strong>sitios webs pregenerados</strong> (<em>pre-generated websites</em>) porque no los tiene que generar <strong>GitHub Pages</strong>, sólo los tiene que publicar.</p>

<p>Vamos a mostrar un ejemplo ilustrativo de un flujo con el que publicar un sitio web pregenerado en <strong>GitHub Pages</strong>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Publicación de sitio web estático en GitHub Pages</span>

<span class="na">on</span><span class="pi">:</span> <span class="s">workflow_dispatch</span>

<span class="na">permissions</span><span class="pi">:</span>
  <span class="na">contents</span><span class="pi">:</span> <span class="s">read</span>
  <span class="na">pages</span><span class="pi">:</span> <span class="s">write</span>
  <span class="na">id-token</span><span class="pi">:</span> <span class="s">write</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Clona repositorio</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v3</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Genera sitio web estático</span>
        <span class="na">shell</span><span class="pi">:</span> <span class="s">bash</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># script para generar el sitio web estático</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Genera y guarda el artefacto de GitHub Pages</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-pages-artifact@v1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">.'</span>

      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Publica el sitio web en GitHub Pages</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/deploy-pages@v1</span>
</code></pre></div></div>

<h2 id="configuración-del-repositorio-para-su-publicación-en-github-pages">Configuración del repositorio para su publicación en <em>GitHub Pages</em></h2>

<p>Una vez tenemos claro que deseamos publicar un sitio web pregenerado en <strong>GitHub Pages</strong>, debemos configurar el <strong>repositorio Git</strong>.
Esto se hace como sigue:</p>

<ol>
  <li>
    <p>Ir a la configuración de <strong>GitHub Pages</strong> del repositorio, <strong><em>Settings &gt; General &gt; Code and automation &gt; Pages</em></strong>.</p>
  </li>
  <li>
    <p>Seleccionar <strong><em>GitHub Actions</em></strong> en <strong><em>Build and deployment &gt; Source</em></strong>.</p>
  </li>
</ol>

<p>He aquí un ejemplo ilustrativo de configuración:</p>

<p><img src="img/configuración-de-sitio-web-pregenerado.png" alt="Configuración de sitio web pregenerado en *GitHub Pages*" /></p>

<h2 id="acción-actionsupload-pages-artifact">Acción <em>actions/upload-pages-artifact</em></h2>

<p><strong>GitHub Actions</strong> proporciona la acción <strong>actions/upload-pages-artifact</strong> para generar el artefacto del sitio web a publicar en <strong>GitHub Pages</strong>.
La idea es generar el sitio con la herramienta que deseemos y, entonces, subir su contenido con esta acción.
Concretamente, la acción genera el artefacto y lo guarda en el <strong>almacén de artefactos</strong> de <strong>GitHub Actions</strong> para su posterior uso.</p>

<p>Recuerde que un <strong>artefacto</strong> (<em>artifact</em>) no es más que un archivo que puede guardarse durante un periodo de tiempo en el <strong>almacén de artefactos</strong> de <strong>GitHub Actions</strong> para su uso posterior en el mismo flujo de trabajo.
Cuando generemos el sitio web a publicar en <strong>GitHub Pages</strong>, este artefacto se conoce formalmente como <strong>artefacto de GitHub Pages</strong> (<em>GitHub Pages artifact</em>), se debe nombrar como <strong>github-pages</strong> y debe ser un archivo <strong>gzip</strong> conteniendo un único archivo <strong>tar</strong>.
Este archivo <strong>tar</strong> debe contener como máximo <strong>10GB</strong> y no puede contener enlaces.</p>

<p>Concretamente, la acción hace este trabajo por nosotros.
En primer lugar, genera el artefacto, generando el <strong>tar</strong>, y a continuación usa <strong>actions/upload-artifact</strong> para añadirlo al almacén.
Dispone de las siguientes entradas:</p>

<table>
  <thead>
    <tr>
      <th>Entrada</th>
      <th>Tipo de datos</th>
      <th>Descripción</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong><em>path</em></strong></td>
      <td>Texto</td>
      <td>Ruta al directorio que contiene el sitio web y que tiene que comprimir.</td>
    </tr>
    <tr>
      <td><strong><em>retention-days</em></strong></td>
      <td>Número</td>
      <td>Días que se mantendrá el artefacto en el almacén.</td>
    </tr>
  </tbody>
</table>

<p>Ejemplo:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Genera y sube el artefacto de GitHub Pages</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/upload-pages-artifact@v1</span>
  <span class="na">with</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">el/directorio/con/el/sitio/web</span>
</code></pre></div></div>

<h2 id="acción-actionsdeploy-pages">Acción <em>actions/deploy-pages</em></h2>

<p>Una vez tenemos el <strong>artefacto de GitHub Pages</strong> en el almacén, lo siguiente es publicarlo en <strong>GitHub Pages</strong>.
Tenga en cuenta que la acción <strong>actions/upload-pages-artifact</strong> genera el artefacto, lo sube al almacén, pero <em>no</em> lo publica en <strong>GitHub Pages</strong>.
Esto hay que hacerlo explícitamente con <strong>actions/deploy-pages</strong>.
Entre sus entradas, encontramos:</p>

<table>
  <thead>
    <tr>
      <th>Entrada</th>
      <th>Tipo de datos</th>
      <th>Descripción</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong><em>token</em></strong></td>
      <td>Texto</td>
      <td><strong><em>Token</em> de GitHub</strong> a utilizar.</td>
    </tr>
    <tr>
      <td><strong><em>artifact_name</em></strong></td>
      <td>Texto</td>
      <td>Nombre del artefacto a publicar. De manera predeterminada, <strong>github-pages</strong>.</td>
    </tr>
  </tbody>
</table>

<p>Vamos a mostrar un ejemplo de uso:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Publica el artefacto de GitHub Pages</span>
  <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/deploy-pages@v1</span>
</code></pre></div></div>

<h2 id="permisos-del-flujo-de-github-actions">Permisos del flujo de <em>GitHub Actions</em></h2>

<p>Cuando se genera un sitio web mediante <strong>GitHub Actions</strong>, debemos especificar explícitamente que el <strong><em>token</em> de <em>GitHub</em></strong> se genere con los siguientes permisos:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">permissions</span><span class="pi">:</span>
  <span class="na">contents</span><span class="pi">:</span> <span class="s">read</span>
  <span class="na">pages</span><span class="pi">:</span> <span class="s">write</span>
  <span class="na">id-token</span><span class="pi">:</span> <span class="s">write</span>
</code></pre></div></div>

<p>No hay que olvidar el principio de menor privilegio.
Sólo hay que proporcionar aquellos permisos que sean necesarios para que el flujo de trabajo pueda hacer su trabajo.
Ni más ni menos.</p>

<h2 id="acción-actionsjekyll-build-pages">Acción <em>actions/jekyll-build-pages</em></h2>

<p>Un sitio web pregenerado no tiene que ser construido por <strong>Jekyll</strong>, podemos utilizar cualquier herramienta que deseemos como, por ejemplo, <strong>Hugo</strong>.
Pero si deseamos generar nosotros mismo el sitio web con <strong>Jekyll</strong>, por la razón que sea, podemos utilizar la acción <strong>actions/jekyll-build-pages</strong>.
Esta acción genera el <strong>sitio web estático</strong> con <strong>Jekyll</strong>, a continuación, el <strong>artefacto de GitHub Pages</strong> y, finalmente, lo sube al <strong>almacén de artefactos</strong>.
Una vez hecho, tendremos que publicarlo con la acción <strong>actions/deploy-pages</strong>.
Si usamos <strong>actions/jekyll-build-pages</strong>, no necesitamos hacer uso de <strong>actions/upload-pages-artifact</strong>.</p>

<p>Esta acción dispone de varias entradas, entre otras:</p>

<table>
  <thead>
    <tr>
      <th>Entrada</th>
      <th>Tipo de datos</th>
      <th>Descripción</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong><em>source</em></strong></td>
      <td>Texto</td>
      <td>Ruta a nuestro <strong>directorio del sitio</strong>. Su valor predeterminado es <strong>./</strong>.</td>
    </tr>
    <tr>
      <td><strong><em>destination</em></strong></td>
      <td>Texto</td>
      <td>Ruta al directorio donde generar el sitio web estático. Su valor predeterminado es <strong>_site</strong>.</td>
    </tr>
    <tr>
      <td><strong><em>future</em></strong></td>
      <td>Booleano</td>
      <td>Indica si permitir la publicación de <em>posts</em> con fechas futuras. Valor predeterminado: <strong><em>false</em></strong>.</td>
    </tr>
    <tr>
      <td><strong><em>token</em></strong></td>
      <td>Texto</td>
      <td><em>Token</em> de <strong>GitHub</strong> a utilizar para publicar el artefacto. Valor predeterminado: <strong><em>github.token</em></strong>.</td>
    </tr>
  </tbody>
</table>

  </div>

  <div class="back-to-top">
    <a href="#"><span class="material-symbols-outlined">arrow_upward</span></a>
  </div>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href="https://twitter.com/krameredulab" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
</ul>
</div>

    <div>
      Copyright © 2023 Kramer Edulab. Product of Spain, EU, made in Valencia by Kramer Edulab.
      <br />
      Portal de formación dedicado a Manuela Cavero Asensio.
    </div>
  </div>
</footer></body>

</html>
